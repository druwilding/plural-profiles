<h1><%= @profile.name %></h1>

<div class="card">
  <div class="profile-header">
    <% if @profile.avatar.attached? %>
      <%= image_tag @profile.avatar.variant(resize_to_fill: [96, 96]), class: "avatar avatar--large" %>
    <% else %>
      <div class="avatar avatar--large avatar--placeholder"><%= @profile.name.first.upcase %></div>
    <% end %>
    <div>
      <% if @profile.pronouns.present? %>
        <p class="pronouns"><%= @profile.pronouns %></p>
      <% end %>
    </div>
  </div>

  <% if @profile.description.present? %>
    <div class="profile-description">
      <%= simple_format(@profile.description) %>
    </div>
  <% end %>

  <div class="profile-actions">
    <%= link_to "Edit", edit_our_profile_path(@profile), class: "btn btn--secondary" %>
    <%= link_to "Delete", our_profile_path(@profile), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn btn--danger" %>
  </div>

  <div class="share-box">
    <h3>Share this profile</h3>
    <div class="share-url">
      <input type="text" value="<%= profile_url(@profile.uuid) %>" readonly id="profile-share-url">
      <button onclick="navigator.clipboard.writeText(document.getElementById('profile-share-url').value); this.textContent='Copied!'; setTimeout(() => this.textContent='Copy', 2000)" class="btn">Copy</button>
    </div>
  </div>

  <% if @profile.groups.any? %>
    <h3>In groups</h3>
    <ul>
      <% @profile.groups.where(user: Current.user).each do |group| %>
        <li><%= link_to group.name, our_group_path(group) %></li>
      <% end %>
    </ul>
  <% end %>
</div>

<p><%= link_to "â† Back to our profiles", our_profiles_path %></p>
