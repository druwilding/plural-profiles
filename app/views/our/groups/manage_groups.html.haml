- content_for(:title) { "Manage groups in #{@group.name} — Plural Profiles" }

%h1
  Manage groups in
  = @group.name

%h2 Current groups

- if @group.child_groups.any?
  .card-list
    - @group.child_groups.order(:name).each do |child|
      .card.card--row
        .card__header
          - if child.avatar.attached?
            = image_tag child.avatar.variant(resize_to_fill: [40, 40]), class: "avatar avatar--small", width: 40, height: 40, alt: child.avatar_alt_text.presence || ""
          - else
            .avatar.avatar--small.avatar--placeholder= child.name.first
          %span= child.name
        = link_to "Remove", remove_group_our_group_path(@group, group_id: child.id), data: { turbo_method: :delete }, class: "btn btn--danger btn--small"
- else
  .card
    %p No groups have been added to this group.

%h2 Add a group

- if @available_groups.any?
  .card-list
    - @available_groups.each do |group|
      .card.card--row
        .card__header
          - if group.avatar.attached?
            = image_tag group.avatar.variant(resize_to_fill: [40, 40]), class: "avatar avatar--small", width: 40, height: 40, alt: group.avatar_alt_text.presence || ""
          - else
            .avatar.avatar--small.avatar--placeholder= group.name.first
          %span= group.name
        = link_to "Add", add_group_our_group_path(@group, group_id: group.id), data: { turbo_method: :post }, class: "btn btn--small"
- else
  .card
    %p
      - if Current.user.groups.count > 1
        All your other groups are already in this group.
      - else
        You need to
        = link_to "create more groups", new_our_group_path
        first.

%p= link_to "← Back to group", our_group_path(@group)
